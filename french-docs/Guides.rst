
Guide d'Utilisation
===================

Ce guide s'adresse aux utilisateurs finaux de la solution Inspeere.

Il comporte trois parties, correspondant aux trois étapes de 
questionnement de nos utilisateurs:


:ref:`eval_besoins`

:ref:`mise_en_service`

:ref:`premiers_pas`


.. _eval_besoins:

1. Evaluation des besoins et choix possibles
--------------------------------------------

Ci-après, nous abordons les questions suivantes:

  * :ref:`pas_expert`
  * :ref:`pourquoi_inspeere`
  * :ref:`peu_ressources`




.. _pas_expert:

Je ne suis pas expert, comment répondre à ces question??
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Les produits et le service Inspeere sont proposés en priorité par 
l'intermédiaire de distributeurs agréés. Ces spécialistes sont 
formés et parfaitement rôdés à notre solution et pourront vous 
aider à répondre à toutes ces questions sans effort ni perte de 
temps inutile.

N'hésitez pas à nous contacter par l'intermédiaire de 
`ce formulaire de contact <https://www.inspeere.com/tester-mon-eligibilite/>`_
vousa serez pris en charge *simplement* et *rapidement* dans votre démarche.

Néanmoins, la curiosité et le questionnement sont légitimes, alors n'hésitez 
pas à lire les rubriques suivantes!

.. _pourquoi_inspeere:

Pourquoi choisir la solution Inspeere plutôt qu'une autre?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

  * :ref:`pour_valeurs`
  * :ref:`pour_innovation`
  * :ref:`pour_securite`
  * :ref:`pour_performance`

.. _pour_valeurs:

Choisir Inspeere pour partager nos valeurs
""""""""""""""""""""""""""""""""""""""""""

Inspeere est projet avec un engagement et des ambitions fortes:

1. Pour la souveraineté numérique. Nous disons stop au vol et à l'exploitation non
   consentie de notre patrimoine numérique. Avec Inspeere vos données, même
   externalisées par nos soins, restent, par construction, inviolables et
   infalsifiables. Comprimées et chifrées à la source, vous seul en possédez 
   la clef. Les GAFAM peuvent aller voir ailleurs!

2. Pour réduire notre dépendance aux DataCenter et à la centralisation numérique. 
   La transition numérique ne doit pas nécessairement conduire à
   la croissance sans fin du parc mondial de DataCenters. On peut nous asséner
   sans relâche que les DataCenter sont de plus en plus écologiques, cela
   ne compensera jamais la fait qu'ils s'en construit toujours plus et qu'ils
   sont de plus en plus grands! La solution d'Inspeere est collbaorative, sans
   DataCenter. 
   
3. Pour une démarche résolument éco-responsable. L'obsolescence programmée, par le 
   jeu des durées de garanties limitées, conduit à un terrible gâchis de matériel 
   et à des cycles de vie artificiellement courts, qui sont désastreux pour 
   l'envrionnement. 
   Pourtant, la quantité d'énergie dépensée (et de carbone émise) pour la fabrication 
   d'un matériel informatique neuf est sans commune mesure avec les quantités 
   d'energie que cet équipement utilisera durant sa faible durée d'exploitation. 
   Inspeere peut proposer à ses clients qui le 
   souhaitent, l'utilisation de matériel reconditionné comme les disques durs. Dans 
   ce cas, le matériel est garanti comme s'il était neuf. Au-delà, Inspeere innove
   aussi en concevant de nouvelles chaînes de valorisation de materiels qui ont
   atteint les limites de garanties usuelles (3 à 5 ans) mais sont encore en parfait 
   état de fonctionnement. Pour nos clients, la différence est indécelable, mais pour
   l'environnement, ca fait une grosse différence!

.. _pour_innovation:

Choisir Inspeere pour l'innovation 
""""""""""""""""""""""""""""""""""

Inspeere propose une solution *innovante*, issue de la recherche publique
ou elle a été mûrie pendant de longues années avant d'être transférée au
sein d'Inspeere, par ses concepteurs. Cette innovation se traduit par des 
brevets, mais aussi un certain nombre de savoirs secrets, qui rendent notre 
solution unique. Nous sommes par exemple les seuls au monde, à notre 
connaissance, à savoir faire fonctionner ls système de fichiers ZFS en mode 
totalement distribué. Mais chut! C'est un secret.

L'innovation dans la solution d'Inspeere nous permet de proposer un service 
fiable et robuste mais à la pointe de la technologie, car:

1. En grande partie construit à partir de briques OpenSource très fiables 
   et robustes (système Linux/Debian, système de fichiers ZFS, hyperviseur 
   Proxmox, orchestration Ansible, ...)

2. Sans compromis sur la technologie: entre petites ou grandes entreprises,
   seul le volume de données change, mais les besoins technologiques sont 
   identiques. En fait, ils sont même plus fort dans les petites structures 
   où les compétences informatiques font souvent défaut (ce à quoi nous sommes
   *très* attentifs!)

3. Un modèle de tarification simple: avec la solution Inspeere, le service
   n'est plus vendu au kilo (ou plus exactement au TO). La solution comporte un
   équipement matériel, placé sur site dans le réseau de l'entreprise, et un 
   service de sauvegarde. Inspeere propose plusieurs niveaux de service, mais 
   ensuite, pour un niveau de service choisi, le coût du service est fixé une 
   fois pour toutes, quel que soit le volume de données. En revanche, et en 
   toute logique, la partie materielle doit elle suivre la volumétrie du 
   stockage. Mais en comparaison des offres concurrentes, nos tarifs sont
   *très* intéressant (car nous n'avons pas besoin de payer du stockage au 
   kilo dans un DataCenter).

.. _pour_securite:

Choisir Inspeere pour la sécurité
"""""""""""""""""""""""""""""""""

Chez Inspeere la sécurité est au centre de nos préoccupations, surtout par 
les temps qui courrent. Au lieu d'appliquer la sécurité en tentant seulement
de construire une forteresse inviolable, nous construisons un système qui
applique la stratégie dite de "la guérilla". Ainsi, au premier niveau de défense
d'un pare-feu extrêmement fiable et robuste, réputé pour sa performance 
(shorewall), nous ajoutons une multitude de mécanismes qui rendent la 
progression de l'Adversaire quasiment impossible. 

Citons par exemple:

* Le choix du système Linux: bien qu'un grand nombre de serveurs fonctionnent
  sous Linux, aujourd'hui 99% des attaquent portent sur les système Windows,
  et plus récemment sur les MAC. Ce n'est pas un hasard: Linux (et ses cousins 
  de la famille BSD) savent déjà très bien se défendre, tant par leur héritage
  Unix, que par le fait qu'ils sont portés par la communauté OpenSource. 
  Aujourd'hui, en matière de sécurité, le modèle OpenSource fait l'unanimité: 
  les failles sont détéctées rapidement par une très large communauté d'expert,
  issue aussi bien des milieux académiques que de l'industrie, et les 
  correctifs mis en production en temps réel.

* Plusieurs niveaux de défense interne anti-intrusion: lorsque ces système 
  détectent 
  une attaque, par exemple lors de plusieurs tentatives de connexions qui 
  échouent, l'adresse d'origine de l'attaquant est automatiquement mise en
  liste noire pour une certaine durée. Ces dispositifs sont donc très efficaces
  pour repérer et bloquer rapidement les attaques dites de type "brute-force", 
  et dans une certaine mesure, par déni de service. 

* Une défense anti-intrusion collective: Les tentatives d'intrusion repérées par
  les équipements d'Inspeere sont remontées auprès d'Inspeere, qui les analyse et
  met à jour en temps réel une liste noire globale. Ainsi, individuellemnt, les 
  équipements d'Inspeere ne sont pas seuls face au reste du monde, mais ils forment
  une grande famille, très soudée et agissant de façon collective. C'est
  l'ADN d'Inspeere.   

* Le cloisonnement: les différents constituants de la solution Inspeere sont
  enfermés dans des prisons virtuelles que constituent les containeurs LXC.
  Cette technologie permet plusieurs choses: d'abord, si par un exploit, l'un
  des constituants tombait sous le contrôle de l'Adversaire, alors ce
  constituant ne pourrait pas simplement prendre le contrôle des autres éléments.
  Il devrait encore parvenir à s'échapper de cette prison interne, ce qui demande
  un deuxième exploit.

* La reduction de privilège: c'est une autre chose que permettent les conteneurs.
  Nombre d'attaques profitent du fait qu'une fois dans la place avec les 
  privilèges administrateur, la partie est gagnée. Ce n'est
  pas vrai dans le cas de la solution Inspeere, car le privilège d'administrateur
  est automatiquement perdu en cas de "sortie de prison", c'est-à-dire dans 
  l'hypothèse où l'adversaire parviendrait à s'échapper de la prison ci-dessus.

* L'authentification centralisée: s'il est bien un élément critique en matière de
  sécurité c'est l'authentification, et en particulier les mots de passe. Avec la
  solution Inspeere, le changement de mot de passe est à la fois simplifié et
  sécurisé par la mise en place d'une infra-structure centalisée interne à
  la solution: le changement de mot de passe se fait à un seul endroit, et il est
  bien protégé. Evidemment l'accès à cette procédure n'est possible qu'en 
  intranet (ou via le VPN). 

* Authentification 2 facteurs sur les accès extranet: La solution Inspeere offre
  à ses clients qui le souhaitent, la possibilité d'accéder à leur données et
  documents en mobilité, via le nuage privé Nextcloud. La version de Nextcloud 
  déployée par Inspeere est renforcée. D'abord car elle bénéficie des sécurités
  ci-dessus, telle que la détection d'Intrusion et l'authentification centralisée.
  Mais elle peut encore être renforcée par les clients qui le souhaitent, en 
  permettant l'activation de solutions d'authentification à deux facteurs.

* Gestion rigoureuse des permissions: avec la solution Nextcloud, la solution
  Inspeere offre deux moyens d'accéder à ses données: soit au travers de
  Nextcloud, qui offre une interface conviviale mais peu adaptée à la gestion
  de gros volumes de données, soit par des partages en réseau, par le biais
  du protocole SMB. Inspeere a fait un effort particulier d'intégration de ces
  deux mécanismes, pour garantir que les permissions d'accès attribuées d'un
  coté soient toujours alignées sur celles de l'autre coté, via le mécanisme très
  puissant des ACLs Posix. Inspeere est la seule solution à notre connaissance
  à proposer ce niveau d'intégration.

* Les sauvegardes sont en lecture seule, par construction: Les sauvegardes 
  d'Inspeere sont inaltérables, par construction, grâce au système ZFS. 
  Avec la solution Inspeere, un rançongiciel ne peut pas modifier les données 
  exitantes pour les crypter. La seule chose qu'il peut faire, c'est détruire 
  le système en effaçant les données qu'il contient. Mais dans ce cas l'attaque 
  ne pourrait faire l'objet d'aucune demande rançon. Et quand bien même une 
  telle situation se produisait, la sauvegarde externalisée très robuste 
  d'Inspeere bénéficie du même mécanisme de sécurité, avec en plus toute la
  puissance du stockage distribué redondant. C'est littéralement  mission 
  impossible!

* Les sauvegardes externes sont cryptées à la source et distribuées de facon
  redondante. Avec Inspeere, vos sauvegardes ne sont pas stockées seulement sur 
  un ou quelques sites, qui constitueraient automatiquement des points de 
  vulnérabilité, mais sur plusieurs, avec une forte tolérance aux pannes. 
  
.. topic:: A propos de DataCenters

    Comme l'a démontré si tristement (et involontairement) l'incendie des DataCenter d'OVH à Strasbourg,
    par leur nature centralisée, les DataCenter sont vulnérables. Par construction.
    
    On peut donc déployer autant de systèmes de sécurité que l'on veut pour **compenser** 
    cette vulnérabilité, cela ne la fera jamais disparaître. C'est un peu comme chercher
    à faire flotter un caillou au milieu de l'océan. Un jour il finira au fond, inéxorbalement,
    ce n'est qu'une question de temps.

    Car l'incendie n'est pas le seul danger qui plane sur les DataCenters:

    * en 2014, c'est l'ouragan Sandie qui s'abattait sur New York et inondait ses DataCenters. 
    
    * En 2018, c'est l'incendie de Paradise, 
      en Californie, qui est passé très près du DataCenter de BackBlaze et ses milliers 
      de baies de stockage. 

    * En janvier 2021, c'est une attaque terroriste qui a été stoppée par le FBI à 
      l'encontre de l'un des DataCenter d'Amazon. 

    Ce ne sont là que quelques exemples choisis pour leur diversité. Par construction, 
    la nature centralisée des DataCenter les rend vulnérable de tous les cotés. 
    
    A l'origine, Internet avait d'ailleurs été conçu de façon décentralisée par la DARPA, 
    justement pour éviter ce type de vulnérabilité, face à la menace d'une attaque nucléaire.
    Un comble que l'internet actuel soit allé à ce point à contre-sens de l'idée originale.

    Enfin, la maintenance de ces infra-structure les expose à moyen terme à un
    grave problème d'obsolescence, que la politique de l'autruche actuelle n'empêchera pas:
    tous ces DataCenters, contruits à peu près à la même période, vont vieillir à la 
    même vitesse... et donc finir par tomber en panne ou demander des investissements 
    colossaux en même temps! 
    
    Or il est bien connu que la réparation et la rénovation coutent bien plus cher qu'une 
    construction neuve. 
    
    Chez Inspeere, nous pensons donc que la solution des DataCenter pour construire
    UNE sauvegarde sécurisée mais centralisée est une abbération, et une logique de profit à 
    très court terme (et peu écologique). Nous pensons que tout l'inverse de ce dont 
    une sauvegarde a besoin. Et donc nous sommes fiers de proposer exactement
    l'inverse. Et un même un peu surpris d'être quasiment les seuls à suivre cette ligne,
    compte tenu des enjeux considérables que représentent les sauvegardes!
 
.. _pour_performance:

Choisir Inspeere pour la performance
""""""""""""""""""""""""""""""""""""

Le fait de disperser les données de sauvegarde sur de multiples site de stockage, avec 
redondance, permet d'optimiser considérablement la performance de la solution d'Inspeere
lors de la récurpération des sauvegardes. 

En effet, en matière de sauvegarde, la phase la plus critique est celle de la récupération
des données. Non seulement les données doivent être retrouvées sans altération ni perte 
(c'est la moindre des choses pour une sauvegarde), mais cette récupération doit aller vite.

Idéalement, il est souhaitable que cette récupération se fasse à une vitesse proche de la
vitesse maximum du réseau, y compris si le réseau est très rapide. Pour cela Inspeere 
bénéficie de multiples facteurs d'accélération, dus à son fonctionnement multi-cible:

1. Comme les données sont divisées en multiples parties de sauvegarde qui sont 
   éparpillées, le téléchargement peut atteindre une vitesse qui permet de cimuler les 
   vitesses (bande passante) des multiples cibles de sauvegarde. Si les sauvegardes 
   sont stockées sur 30 sites qui disposent chacun de 100Mbit/s au moment de la 
   récupération, alors potentiellement la vitesse maximale de la récupération peut 
   atteindre 30 x 100Mbit/s = 3 Gbit/s.

2. Comme nous avons ajouté de la redondance, la bande passante des sources redondante
   peut aussi être exploitée de facon intelligente pour accélérer d'autant la restoration.
   Il est par exemple assez facile de choisir les plus rapides des sources, de facon à
   ne pas être ralenti par celles qui sont surchargées

3. La solution Inspeere gère les ressources de stockage de la sauvegarde de facon 
   rigoureuse, en surveillant les performance de chaque site de stockage au fur et à 
   mesure des sauvegardes et récupération, selon un procédé breveté. LEs sites de stockage
   qui subissent des défaillance ou dont les performances sont diminuées sont détecté
   instantanément et remplacé par de nouveau site plus performant, de facon à toujours 
   garantir une Qualité de Service minimale. 


.. _quantite_stockage:

Combien d'espace de stockage pour les sauvegardes?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

La solution Inspeere est constituée d'une appliance (un serveur) placé sur 
le réseau intranet de l'entreprise. Ce serveur sert de point de concentration local
pour les données à sauvegarder.

Pour cela, Inspeere fournit un certain nombre d'outils très simple pour:

1. Déposer des fichiers directement sur l'appliance en intranet, par exemple 
   à l'aide d'un volume en réseau (protocole SMB)
2. Déposer des fichiers sur l'appliance en mobilité, à l'aide du système de 
   nuage privé NextCloud intégré à notre solution
3. Concentrer des sauvegardes de postes de travail Windows ou Linux, 
   en réseau, soit à l'aide d'outils de synchronisation de fichiers simples 
   tels que ``rsync``, ou à l'aide d'outils de backup reposant sur un agent très simple 
   à installer sur chaque poste à sauvegarder. Ce dernier système à base d'agent permet
   de faire des sauvegardes de type image virtuelle de disque, pour une restoration 
   complète de l'etat de la machine sauvegardée ou de type fichiers, pour une restauration
   sélective des fichiers à recupérer
4. Sur Mac, concentrer les sauvegardes TimeMachine en permettant aux 
   utilisateur de voir notre système comme un disque externe TimeMachine (enfantin!) 

Lors du choix de sa nouvelle solution Inspeere, l'utilisateur doit donc anticiper ses 
besoins de concentration vers l'appliance sur plusieurs années, afin de déterminer
la **capacité utile** dont il/elle a besoin. 

Il convient aussi de tenir compte de la dégradation sensible des performances 
(et de la durée de vie) des disques lorsqu'ils deviennent trop plein. 
Ainsi, il est par exemple fortement déconseillé de dépasser le seuil des 90% 
d'occupation de l'espace disque.

La bonne nouvelle, c'est que le système Inspeere (plus précisément ZFS), comprime 
les données qui peuvent l'être lors de la concentration.
Par exemple, nous avons expérimenté qu'un disque d'ordinateur portable MacBook 
qui contenait 400GO de données, n'occupait au final que 230Go sur le serveur 
inspeere, après compression.

Néanmoins comme il est difficile de prédire quel taux de compression sera 
effectivement atteint, et il est prudent de considerer que le ratio sera au pire de 1:1.

Au final, le calcul est donc relativement simple:

1. Faire la somme des volumes de données à sauvegarder actuellement sur les postes en réseau, 
2. Ajouter le volume des données qui seront eventuellement centralisées par Nextcloud
3. Calculer le taux d'accroissement annuel du volume de données
4. Appliquer ce taux d'accroissement à la durée d'exploitation prévue de la 
   solution Inspeere (typiquement 3 ou 5 ans)
5. Ajouter une marge d'erreur de 20-25% 
6. Ajouter 10% pour eviter le remplissage complet

Le résultat de ce calcul permet alors de déterminer le seuil de **capacité utile** dont 
l'utilisateur a besoin.

.. _peu_ressources:

Pourquoi la solution Inspeere utilise-t-elle aussi peu de ressources?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

La réponse tient dans ces deux éléments technologiques:

 * :ref:`reed_solomon`
 * :ref:`zfs_filesystem`

.. _reed_solomon:

Le codage de Reed-Solomon
"""""""""""""""""""""""""

.. _zfs_filesystem:

Le système de fichiers ZFS
""""""""""""""""""""""""""

Pour le stockage et la sauvegarde de vos données, Inspeere s'appuie sur le 
système de fichiers ZFS. 
Dire qu'il s'agit d'une référence en la matière serait un euphémsime. 
En matière de stockage et de fichiers, ZFS sait simplement tout faire, 
et bien mieux que tous les autres. Là ou d'autres systèmes s'évertuent 
à gérer des partitions sur quelques disques, ZFS est capable de prendre en 
charge des 10aines et des 10aines de disques pour atteindre des capacités 
de stockage faramineuses de l'ordre du Zeta-octet (d'où le Z de ZFS).

Or savoir gérer une telle quantité de données implique de se poser et savoir 
répondre à des questions d'un autre ordre: par exemple, cela implique de 
considérer que sur la quantité, il y a forcément toujours quelques bits qui 
finissent par changer de valeurs de facon "spontanée". ZFS a donc pris le parti de 
constamment vérifier l'intégrité des données, et surtout, de les réparer 
automatiquement quand une erreur est détectée! L'idée est simple, mais sa
réalisation efficace et fiable est une véritable prouesse.

Il en est bien d'autres, mais nous n'allons pas toutes les décrire ici 
pour rester concis (enfin prersque).

Selon l'adage, qui peut le plus peut le moins, et donc chez Inspeere nous utilisons
ZFS pour répondre aux besoins de tous nos clients, que ce soit pour 1TO, 
100TO ou un PO (péta-Octet).

Ainsi, non seulement ZFS permet le chiffrement, et la compression des 
données à la source, ainsi eventuellement que leur déduplication, mais 
il permet aussi les capturer instantanément sous la forme d'instantanés 
( *snapshots* ).
Comme leur création est très facile et ne consomme quasiment aucune 
ressource (dans ZFS), ils peuvent au besoin être créés de facon très 
fréquente, et en très grand nombre.

Les snapshots de ZFS sont donc l'ingrédient idéal qui sert de base à notre 
outil de sauvegarde.
Ils nous pernmettent, grâce à ZFS, de construire un véritable "mille-feuille" 
de vos données, où chaque couche, sous la forme d'un snapshot, représente 
un incrément de sauvegarde, capturé à une date donnée. Grâce à cette technique, 
seule les nouvelles données sont  sauvegardées. Mais ce n'est pas tout. 

Lorsque nous envoyons les données 
sous forme de snapshot depuis une machine avec ZFS vers une autre machine avec
ZFS, bien que les données soit chiffrées et donc indécodable, le ZFS de 
la destination continue de les voir comme un mille-feuille, et ca c'est 
un détail anodin qui change tout.

Cela signifie que lors de la récupération de la sauvegarde, on pourra choisir
la couche de mille-feuille qui nous intéresse, et dans ce cas, ZFS n'envoie 
que le strict nécessaire. Autrement dit avec ZFS, il n'y a pas besoin de 
faire de multiples sauvegardes complètes, comme avec de nombreux autres 
systèmes de sauvegarde. 

Et donc, au final, chaque donnée à sauvegarder, n'a besoin d'être sauvegardée
qu'une et une seule fois (si l'on ne tient pas compte de la redondance).


.. _mise_en_service:

2. Mise en service
------------------


.. _premiers_pas:

3. Premiers pas, visite guidée
------------------------------


Guide d'Installation
====================

Ce guide s'adresse aux distributeurs de la solution Inspeere.







